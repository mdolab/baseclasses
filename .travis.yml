import:
  - mdolab/.github:travis-env.yml
  - mdolab/.github:travis-before-install.yml

env:
  global:
    - DOCKER_REPO=public

install:
  # We thrown away the existing repo in Docker, and copy the new one in-place
  - docker exec -it app /bin/bash -c "rm -rf $DOCKER_WORKING_DIR && cp -r $DOCKER_MOUNT_DIR $DOCKER_WORKING_DIR"
  - docker exec -it app /bin/bash -c ". $BASHRC && cd $DOCKER_WORKING_DIR && pip install ."

script:
  # We need to source the mdolab bashrc before running anything
  - docker exec -it app /bin/bash -c ". $BASHRC && cd $DOCKER_WORKING_DIR && testflo . -v"

after_script:
  - docker rm -f app
